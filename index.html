<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KING BURGER | JS Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* --- CSS (STYLE) --- */
        :root {
            --gold: #D4AF37;      /* Or (Vanille/Luxe) */
            --ruby: #8a1c27;      /* Rouge profond (Rubis/Terre) */
            --emerald: #0b4d2e;   /* Vert profond (For√™t/Ravinala) */
            --dark: #0a0a0a;      /* Noir absolu */
            --dark-card: #141414; /* Noir carte */
            --light: #EAEAEA;     /* Blanc cass√© */
            --gray: #888888;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--dark);
            background-image: radial-gradient(circle at top right, rgba(9, 9, 7, 0.1), transparent 40%),
                              radial-gradient(circle at bottom left, rgba(11, 77, 46, 0.15), transparent 40%);
            color: var(--light);
            line-height: 1.6;
        }

        h1, h2, h3 { 
            font-family: 'Oswald', sans-serif; 
            text-transform: uppercase; 
            letter-spacing: 2px; /* Espacement luxe */
        }

        header {
            background: rgba(10, 10, 10, 0.8);
            padding: 20px 40px;
            position: sticky; top: 0; z-index: 100;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid rgba(212, 175, 55, 0.2); /* Bordure dor√©e subtile */
            backdrop-filter: blur(10px);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .logo { font-size: 24px; font-weight: bold; color: var(--light); letter-spacing: 4px; display: flex; align-items: center; gap: 10px; }
        .logo span { color: var(--gold); } 
        .flag-icon { 
            height: 24px; border: 1px solid #fff; 
            transition: transform 0.3s ease-in-out;
        }
        .logo:hover .flag-icon { transform: scale(1.2) rotate(5deg); }
        #auth-container a, #user-display a { color: var(--gold); text-decoration: none; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; }

        .cart-icon { position: relative; cursor: pointer; font-weight: bold; user-select: none; color: var(--light); letter-spacing: 1px; }
        .badge {
            background: var(--ruby); color: white;
            border-radius: 50%; padding: 2px 8px; font-size: 12px;
            position: absolute; top: -10px; right: -15px;
            display: none; /* Cach√© par d√©faut */
        }

        .hero {
            height: 60vh;
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.8)), url('https://images.unsplash.com/photo-1586190848861-99c9574548e3?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80');
            background-size: cover; background-position: center;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center;
            border-bottom: 1px solid var(--gold);
        }
        .hero h1 { font-size: 4rem; margin-bottom: 10px; color: var(--light); text-shadow: 0 2px 10px rgba(0,0,0,0.8); }
        .hero p { font-size: 1.2rem; color: var(--gold); text-transform: uppercase; letter-spacing: 3px; margin-bottom: 30px; }
        .btn-cta {
            padding: 15px 50px;
            background: transparent; color: var(--gold); 
            border: 1px solid var(--gold);
            text-decoration: none; font-weight: bold; text-transform: uppercase; letter-spacing: 2px;
            transition: all 0.4s ease;
        }
        .btn-cta:hover { background: var(--gold); color: var(--dark); box-shadow: 0 0 20px rgba(212, 175, 55, 0.3); }

        .container { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }
        .section-title {
            font-size: 2rem; margin: 60px 0 30px; color: var(--light);
            border-bottom: 1px solid var(--emerald); display: inline-block; padding-bottom: 10px;
        }

        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }

        .card {
            position: relative;
            background: var(--dark-card); border-radius: 15px; overflow: hidden;
            transition: all 0.4s ease;
            border: 1px solid rgba(255,255,255,0.05);
            display: flex; flex-direction: column;
            /* Initial state for scroll animation */
            opacity: 0;
            transform: translateY(30px);
        }
        .card.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        .card:hover { 
            transform: translateY(-5px); border-color: var(--gold); 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .card-img {
            height: 200px; background: radial-gradient(circle, #2a2a2a, #141414);
            display: flex; justify-content: center; align-items: center; font-size: 80px;
            filter: drop-shadow(0 10px 10px rgba(0,0,0,0.5));
        }

        .card-animation {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 1.5rem;
            opacity: 0.8;
            z-index: 1;
        }

        .card-body { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; }
        .card-title { font-size: 1.2rem; margin-bottom: 10px; display: flex; justify-content: space-between; font-family: 'Oswald', sans-serif; letter-spacing: 1px; }
        .price { color: var(--gold); font-weight: bold; }
        .card-desc { color: var(--gray); font-size: 0.9rem; margin-bottom: 15px; flex-grow: 1; }

        .btn-add {
            width: 100%; padding: 12px;
            background: var(--emerald); border: none; color: white;
            font-weight: bold; cursor: pointer; transition: 0.3s; letter-spacing: 1px;
            text-transform: uppercase; font-family: 'Oswald', sans-serif; border-radius: 4px;
        }
        .btn-add:hover { background: var(--gold); color: var(--dark); }

        .cart-panel {
            position: fixed; bottom: 20px; right: 20px;
            background: rgba(20, 20, 20, 0.95); color: var(--light);
            width: 350px; padding: 20px; border-radius: 10px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            border: 1px solid var(--gold);
            backdrop-filter: blur(10px);
            z-index: 200;
            display: none; /* Cach√© par d√©faut en JS */
            animation: slideIn 0.5s;
        }
        @keyframes slideIn { from { transform: translateY(100px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .cart-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--gray); padding-bottom: 10px; margin-bottom: 10px; }
        .cart-header h3 { color: var(--gold); font-size: 1rem; }
        .cart-item { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 0.9rem; }
        .cart-total { font-size: 1.2rem; font-weight: bold; margin-top: 15px; text-align: right; color: var(--gold); }
        .cart-discount { color: var(--emerald); font-weight: bold; }

        .btn-clear { background: transparent; color: var(--gray); border: 1px solid var(--gray); padding: 5px 10px; cursor: pointer; border-radius: 3px; font-size: 0.7rem; text-transform: uppercase; }
        .btn-clear:hover { border-color: var(--ruby); color: var(--ruby); }
        .btn-checkout {
            display: block; width: 100%; background: var(--gold); color: var(--dark);
            text-align: center; padding: 15px; margin-top: 15px; text-decoration: none; font-weight: bold;
            border-radius: 2px; text-transform: uppercase; letter-spacing: 1px;
            transition: background 0.3s;
        }
        .btn-checkout:hover { background: white; }

        /* Modal Styles */
        .modal {
            display: none; position: fixed; z-index: 300; left: 0; top: 0;
            width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7);
            animation: fadeIn 0.3s;
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .modal-content {
            background-color: var(--dark-card); margin: 10% auto; padding: 30px;
            border: 1px solid #888; width: 80%; max-width: 400px; border-radius: 10px;
            position: relative;
            animation: slideDown 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        @keyframes slideDown {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        .close-btn {
            color: #aaa; position: absolute; top: 10px; right: 20px;
            font-size: 28px; font-weight: bold; cursor: pointer;
        }
        .modal form { display: flex; flex-direction: column; gap: 15px; margin-top: 20px; }
        .modal input, .modal select {
            padding: 15px; background: #1a1a1a; border: 1px solid #333;
            color: var(--light); border-radius: 5px; font-size: 1rem; font-family: 'Montserrat', sans-serif;
        }
        /* Style pour le placeholder du select */
        .modal select:invalid {
            color: var(--gray);
        }
        .modal option {
            background: var(--dark-card);
            color: var(--light);
        }
        .modal button {
            padding: 15px; background: var(--gold); color: var(--dark);
            border: none; cursor: pointer; font-weight: bold; text-transform: uppercase; border-radius: 0; letter-spacing: 1px;
        }

        footer { 
            text-align: center; padding: 40px; color: var(--gray); 
            font-size: 0.8rem; margin-top: 50px; border-top: 1px solid rgba(212, 175, 55, 0.1); 
            overflow: hidden; /* Pour s'assurer que la vache ne d√©passe pas */
            text-transform: uppercase; letter-spacing: 2px;
        }

        /* --- DASHBOARD ADMIN STYLES --- */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px; }
        .stat-card { background: var(--dark-card); padding: 20px; border: 1px solid var(--gold); border-radius: 2px; text-align: center; transition: transform 0.3s; }
        .stat-card:hover { transform: translateY(-5px); box-shadow: 0 5px 15px rgba(212, 175, 55, 0.1); }
        .stat-card h3 { font-size: 0.8rem; color: var(--gray); margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px; }
        .stat-card p { font-size: 2rem; color: var(--light); font-weight: bold; font-family: 'Oswald', sans-serif; }
        
        .dashboard-row { display: grid; grid-template-columns: 2fr 1fr; gap: 30px; margin-bottom: 40px; }
        .chart-container { background: var(--dark-card); padding: 20px; border-radius: 2px; border: 1px solid rgba(255,255,255,0.05); min-height: 300px; }
        
        .data-table { width: 100%; border-collapse: collapse; margin-top: 20px; color: var(--gray); font-size: 0.9rem; }
        .data-table th { text-align: left; padding: 15px; border-bottom: 1px solid var(--gold); color: var(--gold); text-transform: uppercase; font-size: 0.8rem; }
        .data-table td { padding: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .tag { padding: 2px 8px; border-radius: 4px; font-size: 0.7rem; text-transform: uppercase; font-weight: bold; }
        .tag-vip { background: var(--gold); color: var(--dark); }
        .tag-new { background: var(--emerald); color: white; }

        /* --- PAYMENT & SOCIAL --- */
        .payment-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .payment-option {
            background: var(--dark); border: 1px solid var(--gray);
            padding: 15px; text-align: center; cursor: pointer;
            border-radius: 5px; transition: 0.3s;
            display: flex; flex-direction: column; align-items: center; gap: 10px;
        }
        .payment-option:hover { border-color: var(--gold); background: rgba(212, 175, 55, 0.1); }
        .payment-option.selected { border-color: var(--gold); background: var(--gold); color: var(--dark); }
        .payment-icon { font-size: 24px; }
        
        .social-divider { text-align: center; margin: 20px 0; position: relative; }
        .social-divider::before {
            content: ''; position: absolute; top: 50%; left: 0; right: 0;
            height: 1px; background: var(--gray); opacity: 0.3; z-index: 0;
        }
        .social-divider span { background: var(--dark-card); padding: 0 10px; position: relative; z-index: 1; color: var(--gray); font-size: 0.8rem; }
        .social-buttons { display: flex; gap: 10px; justify-content: center; }
        .btn-social { flex: 1; padding: 10px; border: none; border-radius: 4px; color: white; cursor: pointer; font-size: 0.9rem; transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .btn-social svg { width: 18px; height: 18px; fill: currentColor; }
        .btn-fb { background: #3b5998; }
        .btn-google { background: #db4437; }
        .btn-twitter { background: #1da1f2; }

        /* --- RESPONSIVE DESIGN (POUR MOBILE) --- */
        @media (max-width: 768px) {
            body {
                -webkit-text-size-adjust: 100%; /* Emp√™che le zoom auto des polices sur iOS */
            }

            /* Header */
            header {
                padding: 15px;
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            .header-right {
                gap: 15px;
                width: 100%;
                justify-content: space-around;
            }

            /* Hero */
            .hero {
                height: 50vh;
                padding: 0 10px;
            }
            .hero h1 { font-size: 2.5rem; }
            .hero p { font-size: 1rem; }
            .btn-cta { padding: 12px 30px; }

            /* Layout & Polices */
            .container { padding: 20px 15px; }
            .section-title { font-size: 1.6rem; }

            /* Panier */
            .cart-panel {
                width: 100%;
                max-width: 100%;
                bottom: 0;
                left: 0;
                right: 0;
                border-radius: 15px 15px 0 0;
                border-left: none;
                border-right: none;
                border-bottom: none;
            }

            /* Modals */
            .modal-content { width: 90%; margin: 20% auto; padding: 20px; }

            /* Dashboard */
            .dashboard-row { grid-template-columns: 1fr; }
            .stats-grid { grid-template-columns: 1fr 1fr; }
            .data-table { font-size: 0.8rem; }
            .data-table th, .data-table td { padding: 8px; }
        }
    </style>
</head>
<body>

    <header>
        <div class="logo">
            GASY <span>BURGER</span>
            <img src="https://upload.wikimedia.org/wikipedia/commons/b/bc/Flag_of_Madagascar.svg" alt="Drapeau Madagascar" class="flag-icon">
        </div>
        <div class="header-right">
            <div id="auth-container">
                <a href="#" id="login-link">Connexion</a> / <a href="#" id="register-link">Inscription</a>
            </div>
            <div id="user-display" style="display:none;">
                <span id="username-display" style="color:var(--gold); font-weight:bold;"></span> | <a href="#" id="profile-link">Mon Profil</a> | <a href="#" id="logout-link">D√©connexion</a>
            </div>
            <div class="cart-icon">
                PANIER
                <span class="badge" id="cart-badge">0</span>
            </div>
        </div>
    </header>

    <section class="hero" id="hero-section">
        <h1>Le Go√ªt du Pays</h1>
        <p>Ny Tsiron'ny Gasy | √âdition Prestige</p>
        <a href="#menu" class="btn-cta">MANAFATRA (COMMANDER)</a>
        <button id="gift-card-btn" class="btn-cta" style="margin-top: 15px; border-color: var(--ruby); color: var(--ruby);">Cadeau (Fanomezana)</button>
    </section>

    <div class="container" id="menu">
        <!-- Les √©l√©ments seront inject√©s ici par JavaScript -->
        <h2 class="section-title">Nos Burgers</h2>
        <div class="grid" id="grid-burgers"></div>

        <h2 class="section-title">Accompagnements</h2>
        <div class="grid" id="grid-sides"></div>

        <h2 class="section-title">Boissons</h2>
        <div class="grid" id="grid-drinks"></div>

        <h2 class="section-title">Desserts</h2>
        <div class="grid" id="grid-desserts"></div>
    </div>

    <!-- DASHBOARD G√âRANT (Cach√© par d√©faut) -->
    <div class="container" id="admin-dashboard" style="display:none;">
        <h2 class="section-title">Tableau de Bord G√©rant</h2>
        
        <!-- Stats Row -->
        <div class="stats-grid">
            <div class="stat-card">
                <h3>Chiffre d'Affaires (Total)</h3>
                <p id="stat-revenue">0.00‚Ç¨</p>
            </div>
            <div class="stat-card">
                <h3>Commandes Totales</h3>
                <p id="stat-orders">0</p>
            </div>
            <div class="stat-card">
                <h3>Clients Actifs</h3>
                <p id="stat-clients">0</p>
            </div>
            <div class="stat-card">
                <h3>Panier Moyen</h3>
                <p id="stat-avg-cart">0.00‚Ç¨</p>
            </div>
        </div>

        <!-- Graph & Actions -->
        <div class="dashboard-row">
            <div class="chart-container">
                <h3 style="color:var(--gold); margin-bottom:15px;">√âvolution des Ventes (7 derniers jours)</h3>
                <canvas id="salesChart" width="600" height="300" style="width:100%; height:100%;"></canvas>
            </div>
            <div class="actions-container" style="display:flex; flex-direction:column; gap:15px;">
                <h3 style="color:var(--gold);">Actions Rapides</h3>
                <button class="btn-cta" onclick="exportOrdersCSV()" style="width:100%; font-size:0.9rem;">üì• Exporter Comptabilit√© (CSV)</button>
                <button class="btn-cta" onclick="seedDummyData()" style="width:100%; font-size:0.9rem; border-color:var(--gray); color:var(--gray);">üîÑ G√©n√©rer Donn√©es Test</button>
                <button class="btn-cta" onclick="factoryReset()" style="width:100%; font-size:0.9rem; border-color:var(--ruby); color:var(--ruby);">‚ö†Ô∏è R√©initialiser Base de Donn√©es</button>
            </div>
        </div>

        <!-- Client List -->
        <h3 class="section-title" style="font-size: 1.5rem; margin-top: 20px;">Derniers Clients & Profils</h3>
        <div class="table-responsive">
            <table class="data-table" id="clients-table">
                <thead>
                    <tr>
                        <th>Client</th>
                        <th>Derni√®re Commande</th>
                        <th>Total D√©pens√©</th>
                        <th>Statut</th>
                    </tr>
                </thead>
                <tbody id="clients-table-body">
                    <!-- Rempli par JS -->
                </tbody>
            </table>
        </div>
    </div>

    <div class="cart-panel" id="cart-panel">
        <div class="cart-header">
            <h3>Votre Commande</h3>
            <button class="btn-clear" id="clear-cart-btn">Vider</button>
        </div>
        <div id="cart-items-container"></div>
        <div id="cart-summary" style="text-align: right; margin-top: 15px; border-top: 1px solid var(--gray); padding-top: 10px;">
            <div class="cart-subtotal" id="cart-subtotal">SOUS-TOTAL : 0.00‚Ç¨</div>
            <div class="cart-discount" id="cart-discount" style="display:none;"></div>
        </div>
        <div class="cart-total" id="cart-total">TOTAL : 0.00‚Ç¨</div>
        <a href="#" class="btn-checkout" id="checkout-btn">VALIDER</a>
    </div>

    <!-- Modals for Login/Registration -->
    <div id="login-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" data-modal="login-modal">&times;</span>
            <h2>Connexion</h2>
            <form id="login-form">
                <input type="text" name="username" placeholder="Nom d'utilisateur" required>
                <input type="password" name="password" placeholder="Mot de passe" required>
                <button type="submit">Se connecter</button>
                <div class="social-divider"><span>OU VIA</span></div>
                <div class="social-buttons">
                    <button type="button" class="btn-social btn-fb">
                        <svg viewBox="0 0 24 24"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg>
                        Facebook
                    </button>
                    <button type="button" class="btn-social btn-google">
                        <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5.46 10.75h-5.46v2.5h3.13c-.28 1.48-1.57 2.5-3.13 2.5-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5c.93 0 1.78.34 2.44.91l1.86-1.86C14.86 8.34 13.51 7.5 12 7.5c-2.48 0-4.5 2.02-4.5 4.5s2.02 4.5 4.5 4.5c2.29 0 4.16-1.68 4.46-3.75z"></path></svg>
                        Google
                    </button>
                    <button type="button" class="btn-social btn-twitter">
                        <svg viewBox="0 0 24 24"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg>
                        Twitter
                    </button>
                </div>
            </form>
        </div>
    </div>
    <div id="register-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" data-modal="register-modal">&times;</span>
            <h2>Inscription</h2>
            <form id="register-form">
                <input type="text" name="username" placeholder="Nom d'utilisateur" required>
                <input type="password" name="password" placeholder="Mot de passe" required>
                <input type="number" name="age" placeholder="√Çge" required min="1">
                <input type="date" name="birthdate" required title="Date de naissance">
                <select name="gender" required>
                    <option value="" disabled selected>Votre sexe</option>
                    <option value="homme">Homme</option>
                    <option value="femme">Femme</option>
                </select>
                <button type="submit">S'inscrire</button>
                <div class="social-divider"><span>OU VIA</span></div>
                <div class="social-buttons">
                    <button type="button" class="btn-social btn-fb">
                        <svg viewBox="0 0 24 24"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg>
                        Facebook
                    </button>
                    <button type="button" class="btn-social btn-google">
                        <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5.46 10.75h-5.46v2.5h3.13c-.28 1.48-1.57 2.5-3.13 2.5-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5c.93 0 1.78.34 2.44.91l1.86-1.86C14.86 8.34 13.51 7.5 12 7.5c-2.48 0-4.5 2.02-4.5 4.5s2.02 4.5 4.5 4.5c2.29 0 4.16-1.68 4.46-3.75z"></path></svg>
                        Google
                    </button>
                    <button type="button" class="btn-social btn-twitter">
                        <svg viewBox="0 0 24 24"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg>
                        Twitter
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Profil Utilisateur -->
    <div id="profile-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" data-modal="profile-modal">&times;</span>
            <h2>Mon Profil</h2>
            <div id="profile-content" style="color: var(--light); margin-top: 20px;"></div>
        </div>
    </div>

    <!-- Modal Paiement -->
    <div id="payment-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" data-modal="payment-modal">&times;</span>
            <h2>Paiement</h2>
            <p style="color:var(--gray); font-size:0.9rem;">Montant √† r√©gler : <span id="payment-amount" style="color:var(--gold); font-weight:bold;"></span></p>
            
            <div class="payment-grid">
                <div class="payment-option" onclick="selectPayment('mvola', this)">
                    <span class="payment-icon">üü°</span> Mvola
                </div>
                <div class="payment-option" onclick="selectPayment('orange', this)">
                    <span class="payment-icon">üü†</span> Orange Money
                </div>
                <div class="payment-option" onclick="selectPayment('airtel', this)">
                    <span class="payment-icon">üî¥</span> Airtel Money
                </div>
                <div class="payment-option" onclick="selectPayment('visa', this)">
                    <span class="payment-icon">üí≥</span> Visa / MC
                </div>
            </div>
            
            <div id="payment-details" style="margin-top:20px; display:none;">
                <input type="text" id="payment-input" placeholder="Num√©ro de t√©l√©phone" style="width:100%; padding:10px; margin-bottom:10px;">
                <button onclick="finalizeOrder()" style="width:100%;">CONFIRMER LA COMMANDE</button>
            </div>
        </div>
    </div>

    <footer>
        &copy; 2026 GASY BURGER.
    </footer>

    <script>
        // --- JAVASCRIPT (LOGIQUE) ---

        // 1. Donn√©es (Simule la base de donn√©es)
        const menuData = {
            burgers: [
                { id: 1, name: 'Le Smoky King', price: 12.50, desc: 'Double b≈ìuf Angus, cheddar affin√©, sauce barbecue.', img: 'üçî' },
                { id: 2, name: 'Truffle Deluxe', price: 14.00, desc: 'Steak hach√© minute, sauce √† la truffe noire.', img: 'ü•ì' },
                { id: 3, name: 'Spicy Chicken', price: 11.90, desc: 'Poulet pan√© maison, jalape√±os, sauce sriracha.', img: 'üçó' },
                { id: 8, name: 'Le Gasy', price: 15.00, desc: 'Steak de z√©bu, sauce rougail, achards de l√©gumes.', img: 'üá≤üá¨' },
                { id: 9, name: 'Le V√©g√© King', price: 12.00, desc: 'Galette de l√©gumes, avocat, sauce secr√®te.', img: 'ü•ë' },
                { id: 10, name: 'Le T-Rex', price: 18.00, desc: 'Triple steak, triple cheddar, double bacon.', img: 'ü¶ñ' }
            ],
            sides: [
                { id: 4, name: 'Frites Rustiques', price: 4.50, desc: 'Pommes de terre coup√©es au couteau.', img: 'üçü' },
                { id: 5, name: 'Onion Rings', price: 5.00, desc: 'Oignons doux frits dans une p√¢te √† la bi√®re.', img: 'üßÖ' },
                { id: 11, name: 'Frites de Patate Douce', price: 5.50, desc: 'Patates douces croustillantes et fondantes.', img: 'üç†' },
                { id: 12, name: 'Mofo Gasy', price: 3.00, desc: 'Petits pains de riz sucr√©s, sp√©cialit√© malgache.', img: 'ü•û' },
                { id: 13, name: 'Salade Fra√Æcheur', price: 6.00, desc: 'Salade verte, tomates, concombres, vinaigrette.', img: 'ü•ó' }
            ],
            drinks: [
                { id: 6, name: 'Cola Craft', price: 3.50, desc: 'Cola artisanal aux √©pices naturelles.', img: 'ü•§' },
                { id: 7, name: 'Limonade Maison', price: 4.00, desc: 'Citrons press√©s, menthe fra√Æche.', img: 'üçã' },
                { id: 14, name: 'Jus de Baobab', price: 4.50, desc: 'Jus exotique et riche en vitamines.', img: 'üå≥' },
                { id: 15, name: 'Bi√®re THB', price: 5.00, desc: 'La bi√®re blonde embl√©matique de Madagascar.', img: 'üç∫' }
            ],
            desserts: [
                { id: 16, name: 'Koba Ravina', price: 6.50, desc: 'G√¢teau de riz, pistaches et banane, cuit √† la vapeur.', img: 'ü•Æ' },
                { id: 17, name: 'Mousse au Chocolat', price: 5.50, desc: 'Mousse onctueuse au chocolat noir de Madagascar.', img: 'üç´' }
            ]
        };

        // 2. √âtat de l'application
        let cart = {};
        let currentUser = null;
        let isAdmin = false;
        const GIFT_CARD_CODE = "PROMO10";
        const GIFT_CARD_VALUE = 5.00;
        let selectedPaymentMethod = null;

        // 3. Initialisation au chargement de la page
        document.addEventListener('DOMContentLoaded', () => {
            // Rendu des produits
            renderGrid('burgers', 'grid-burgers');
            renderGrid('sides', 'grid-sides');
            renderGrid('drinks', 'grid-drinks');
            renderGrid('desserts', 'grid-desserts');

            // V√©rification de la session utilisateur
            checkUserSession();

            // Ajout des √©couteurs d'√©v√©nements
            setupEventListeners();

            // Mise √† jour de l'interface du panier (au cas o√π des donn√©es sont en cache)
            updateCartUI();

            // Animation au d√©filement
            setupScrollAnimations();
        });


        // --- NOUVEAU : Logique d'animation au d√©filement ---
        function setupScrollAnimations() {
            const options = {
                root: null, // par rapport au viewport
                rootMargin: '0px',
                threshold: 0.1 // se d√©clenche quand 10% de l'√©l√©ment est visible
            };

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target); // On n'anime qu'une seule fois
                    }
                });
            }, options);

            // Observer toutes les cartes avec un d√©lai d√©cal√©
            document.querySelectorAll('.card').forEach((card, index) => {
                card.style.transitionDelay = `${index * 100}ms`;
                observer.observe(card);
            });
        }
        // 4. Fonctions d'affichage
        function renderGrid(category, elementId) {
            const container = document.getElementById(elementId);
            if (!container) return;

            menuData[category].forEach(item => {
                const animatedEmoji = getAnimatedEmoji(item);
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    ${animatedEmoji ? `<div class="card-animation">${animatedEmoji}</div>` : ''}
                    <div class="card-img">${item.img}</div>
                    <div class="card-body">
                        <div class="card-title">
                            ${item.name}
                            <span class="price">${item.price.toFixed(2)}‚Ç¨</span>
                        </div>
                        <p class="card-desc">${item.desc}</p>
                        <button class="btn-add" data-id="${item.id}" data-category="${category}">Ajouter</button>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function getAnimatedEmoji(item) {
            const id = item.id;
            switch(id) {
                // Burgers
                case 1: return 'üî•'; // Smoky King -> Natsu, etc.
                case 2: return 'üëë'; // Truffle Deluxe -> Roi
                case 3: return 'üë∫'; // Spicy Chicken -> Masque Tengu (Demon Slayer)
                case 8: return 'üè¥‚Äç‚ò†Ô∏è'; // Le Gasy -> One Piece
                case 9: return 'üçÉ'; // Le V√©g√© King -> Konoha (Naruto)
                case 10: return 'üêâ'; // T-Rex -> Dragon Ball
                // Accompagnements
                case 4: return '‚öîÔ∏è'; // Frites -> Attaque des Titans
                case 5: return 'üç•'; // Onion Rings -> Naruto
                case 11: return '‚ö°'; // Frites Patate Douce -> Pikachu
                case 12: return 'üçô'; // Mofo Gasy -> Onigiri
                case 13: return 'üå∏'; // Salade Fra√Æcheur -> Sakura
                // Boissons
                case 6: return 'üß™'; // Cola Craft -> Dr. Stone
                case 7: return '‚òÄÔ∏è'; // Limonade Maison -> Escanor
                case 14: return 'üëí'; // Jus de Baobab -> Luffy
                case 15: return 'üç∂'; // Bi√®re THB -> Sak√©
                // Desserts
                case 16: return 'üêô'; // Koba Ravina -> Koro-sensei
                case 17: return 'üç∞'; // Mousse au Chocolat -> G√¢teau
                default:
                    return null;
            }
        }
        // 5. Logique du Panier
        function addToCart(id, category) {
            if (cart[id]) {
                cart[id].qty++;
            } else {
                // Trouver l'objet dans les donn√©es
                const item = menuData[category].find(i => i.id == id);
                cart[id] = { ...item, qty: 1 };
            }
            updateCartUI();
        }

        function updateCartUI() {
            const panel = document.getElementById('cart-panel');
            const container = document.getElementById('cart-items-container');
            const badge = document.getElementById('cart-badge');
            const subTotalEl = document.getElementById('cart-subtotal');
            const discountEl = document.getElementById('cart-discount');
            const totalEl = document.getElementById('cart-total');
            
            container.innerHTML = '';
            let subTotal = 0;
            let count = 0;
            let discount = 0;

            for (const id in cart) {
                const item = cart[id];
                subTotal += item.price * item.qty;
                count += item.qty;

                const div = document.createElement('div');
                div.className = 'cart-item';
                div.innerHTML = `<span>${item.qty}x ${item.name}</span><span>${(item.price * item.qty).toFixed(2)}‚Ç¨</span>`;
                container.appendChild(div);
            }

            // Appliquer la carte cadeau si l'utilisateur en a une
            const userGiftCards = JSON.parse(localStorage.getItem('kingBurgerGiftCards')) || {};
            if (currentUser && userGiftCards[currentUser] && subTotal > 0) {
                discount = userGiftCards[currentUser].value || GIFT_CARD_VALUE;
                discountEl.innerText = `REMISE CARTE CADEAU : -${discount.toFixed(2)}‚Ç¨`;
                discountEl.style.display = 'block';
            } else {
                discountEl.style.display = 'none';
            }

            let total = subTotal - discount;
            if (total < 0) total = 0;

            subTotalEl.innerText = 'SOUS-TOTAL : ' + subTotal.toFixed(2) + '‚Ç¨';
            totalEl.innerText = 'TOTAL : ' + total.toFixed(2) + '‚Ç¨';
            
            if (count > 0) {
                badge.style.display = 'block';
                badge.innerText = count;
                panel.style.display = 'block';
            } else {
                badge.style.display = 'none';
                panel.style.display = 'none';
            }
        }

        function clearCart() {
            cart = {};
            updateCartUI();
        }

        function toggleCart() {
            const panel = document.getElementById('cart-panel');
            // On peut toujours afficher/cacher le panier, m√™me vide.
            if (panel) {
                panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
            }
        }

        function checkout() {
            if (Object.keys(cart).length === 0) {
                alert('Votre panier est vide.');
                return;
            }
            // Ouvrir le modal de paiement
            const totalText = document.getElementById('cart-total').innerText.replace('TOTAL : ', '');
            document.getElementById('payment-amount').innerText = totalText;
            openModal('payment-modal');
        }

        window.selectPayment = function(method, elem) {
            selectedPaymentMethod = method;
            // UI Update
            document.querySelectorAll('.payment-option').forEach(el => el.classList.remove('selected'));
            elem.classList.add('selected');
            
            const details = document.getElementById('payment-details');
            const input = document.getElementById('payment-input');
            details.style.display = 'block';
            
            if(method === 'visa') input.placeholder = "Num√©ro de carte (16 chiffres)";
            else input.placeholder = "Num√©ro mobile (ex: 034...)";
        }

        window.finalizeOrder = function() {
            if(!selectedPaymentMethod) return;

            // G√©rer la carte cadeau
            const userGiftCards = JSON.parse(localStorage.getItem('kingBurgerGiftCards')) || {};
            if (currentUser && userGiftCards[currentUser]) {
                delete userGiftCards[currentUser];
                localStorage.setItem('kingBurgerGiftCards', JSON.stringify(userGiftCards));
            }
            
            // --- SAUVEGARDE DE LA COMMANDE (POUR LE G√âRANT) ---
            const orders = JSON.parse(localStorage.getItem('kingBurgerOrders')) || [];
            const total = parseFloat(document.getElementById('cart-total').innerText.replace('TOTAL : ', '').replace('‚Ç¨', ''));
            orders.push({
                id: Date.now(),
                date: new Date().toISOString(),
                user: currentUser || 'Invit√©',
                items: cart,
                total: total,
                payment: selectedPaymentMethod
            });
            localStorage.setItem('kingBurgerOrders', JSON.stringify(orders));
            // --------------------------------------------------

            alert('Paiement accept√© via ' + selectedPaymentMethod.toUpperCase() + '. Commande valid√©e ! Merci.');
            closeModal('payment-modal');
            clearCart();
        }

        // 6. Logique d'authentification et utilisateur
        function checkUserSession() {
            const loggedInUser = sessionStorage.getItem('kingBurgerCurrentUser');
            if (loggedInUser) {
                currentUser = loggedInUser;
                isAdmin = (currentUser === 'admin'); // Simple check admin
                updateUserUI(true);
            } else {
                updateUserUI(false);
            }
        }

        function updateUserUI(isLoggedIn) {
            const authContainer = document.getElementById('auth-container');
            const userDisplay = document.getElementById('user-display');
            const usernameDisplay = document.getElementById('username-display');

            if (isLoggedIn) {
                authContainer.style.display = 'none';
                userDisplay.style.display = 'block';
                usernameDisplay.innerText = currentUser;
            } else {
                authContainer.style.display = 'block';
                userDisplay.style.display = 'none';
                usernameDisplay.innerText = '';
            }

            // Gestion de l'affichage Admin vs Client
            const adminDashboard = document.getElementById('admin-dashboard');
            const menuSection = document.getElementById('menu');
            const heroSection = document.getElementById('hero-section');

            if (isAdmin) {
                adminDashboard.style.display = 'block';
                menuSection.style.display = 'none';
                heroSection.style.display = 'none';
                renderAdminDashboard();
            } else {
                adminDashboard.style.display = 'none';
                menuSection.style.display = 'block';
                heroSection.style.display = 'flex';
            }

            updateCartUI(); // Mettre √† jour le panier pour appliquer/retirer la remise
        }

        function handleRegister(e) {
            e.preventDefault();
            const username = e.target.username.value;
            const password = e.target.password.value;
            const age = e.target.age.value;
            const birthdate = e.target.birthdate.value;
            const gender = e.target.gender.value;
            let users = JSON.parse(localStorage.getItem('kingBurgerUsers')) || [];

            if (users.find(user => user.username === username)) {
                alert('Ce nom d\'utilisateur existe d√©j√†.');
                return;
            }

            users.push({ username, password, age, birthdate, gender });
            localStorage.setItem('kingBurgerUsers', JSON.stringify(users));
            alert('Inscription r√©ussie ! Vous pouvez maintenant vous connecter.');
            closeModal('register-modal');
            openModal('login-modal');
        }

        function handleLogin(e) {
            e.preventDefault();
            const username = e.target.username.value;
            const password = e.target.password.value;
            
            // --- ACC√àS G√âRANT (Backdoor Admin) ---
            if (username === 'admin' && password === 'admin') {
                currentUser = 'admin';
                sessionStorage.setItem('kingBurgerCurrentUser', 'admin');
                isAdmin = true;
                updateUserUI(true);
                closeModal('login-modal');
                return;
            }

            const users = JSON.parse(localStorage.getItem('kingBurgerUsers')) || [];

            const user = users.find(u => u.username === username && u.password === password);

            if (user) {
                currentUser = user.username;
                sessionStorage.setItem('kingBurgerCurrentUser', user.username);
                isAdmin = (user.username === 'admin');
                updateUserUI(true);
                closeModal('login-modal');
            } else {
                alert('Nom d\'utilisateur ou mot de passe incorrect.');
            }
        }

        function handleLogout() {
            currentUser = null;
            sessionStorage.removeItem('kingBurgerCurrentUser');
            updateUserUI(false);
        }

        // 7. Logique Carte Cadeau
        function promptForGiftCard() {
            if (!currentUser) {
                alert("Vous devez √™tre connect√© pour v√©rifier votre fid√©lit√©.");
                openModal('login-modal');
                return;
            }

            // Calcul des stats client (Plats command√©s et Total d√©pens√©)
            const orders = JSON.parse(localStorage.getItem('kingBurgerOrders')) || [];
            const userOrders = orders.filter(o => o.user === currentUser);
            
            let totalDishes = 0;
            let totalSpent = 0;

            userOrders.forEach(order => {
                totalSpent += order.total;
                if (order.items) {
                    Object.values(order.items).forEach(item => totalDishes += item.qty);
                }
            });

            let msg = `--- STATUT FID√âLIT√â ---\n\n`;
            msg += `üë§ Client : ${currentUser}\n`;
            msg += `üçî Plats command√©s : ${totalDishes}\n`;
            msg += `üí∞ Total achats : ${totalSpent.toFixed(2)}‚Ç¨\n`;

            if (totalSpent > 100) {
                let userGiftCards = JSON.parse(localStorage.getItem('kingBurgerGiftCards')) || {};
                
                // Si le client n'a pas d√©j√† une carte active
                if (!userGiftCards[currentUser]) {
                    userGiftCards[currentUser] = { code: 'LOYALTY20', value: 20.00 };
                    localStorage.setItem('kingBurgerGiftCards', JSON.stringify(userGiftCards));
                    msg += "\nüéâ F√âLICITATIONS ! üéâ\n";
                    msg += "Vous avez d√©pass√© 100‚Ç¨ d'achats.\n";
                    msg += "La maison vous offre un bon de r√©duction de 20‚Ç¨ sur votre prochaine commande !";
                    updateCartUI();
                } else {
                    msg += "\n‚úÖ Vous avez d√©j√† un bon de r√©duction actif.";
                }
            } else {
                const remaining = 100 - totalSpent;
                msg += `\nIl vous manque ${remaining.toFixed(2)}‚Ç¨ pour gagner un bon de 20‚Ç¨ !`;
            }
            
            alert(msg);
        }

        // --- 10. FONCTIONNALIT√âS G√âRANT (ADMIN) ---

        function renderAdminDashboard() {
            const orders = JSON.parse(localStorage.getItem('kingBurgerOrders')) || [];
            const users = JSON.parse(localStorage.getItem('kingBurgerUsers')) || [];

            // 1. Calcul des Stats
            const totalRevenue = orders.reduce((sum, order) => sum + order.total, 0);
            const totalOrders = orders.length;
            const uniqueClients = new Set(orders.map(o => o.user)).size;
            const avgCart = totalOrders > 0 ? (totalRevenue / totalOrders) : 0;

            document.getElementById('stat-revenue').innerText = totalRevenue.toFixed(2) + '‚Ç¨';
            document.getElementById('stat-orders').innerText = totalOrders;
            document.getElementById('stat-clients').innerText = uniqueClients;
            document.getElementById('stat-avg-cart').innerText = avgCart.toFixed(2) + '‚Ç¨';

            // 2. Tableau des Clients
            const tbody = document.getElementById('clients-table-body');
            tbody.innerHTML = '';
            
            // Grouper les commandes par utilisateur
            const clientStats = {};
            orders.forEach(order => {
                if(!clientStats[order.user]) clientStats[order.user] = { total: 0, lastOrder: null, count: 0 };
                clientStats[order.user].total += order.total;
                clientStats[order.user].count += 1;
                clientStats[order.user].lastOrder = order.date;
            });

            // Afficher les utilisateurs enregistr√©s + invit√©s
            const allClients = [...new Set([...users.map(u => u.username), ...Object.keys(clientStats)])];

            allClients.forEach(clientName => {
                const stats = clientStats[clientName] || { total: 0, lastOrder: 'Aucune', count: 0 };
                const isVip = stats.total > 100;
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td style="font-weight:bold; color:var(--light);">${clientName}</td>
                    <td>${stats.lastOrder !== 'Aucune' ? new Date(stats.lastOrder).toLocaleDateString() : '-'}</td>
                    <td>${stats.total.toFixed(2)}‚Ç¨</td>
                    <td>${isVip ? '<span class="tag tag-vip">VIP Gold</span>' : '<span class="tag tag-new">Standard</span>'}</td>
                `;
                tbody.appendChild(tr);
            });

            // 3. Graphique des Ventes (Canvas)
            drawSalesChart(orders);
        }

        function drawSalesChart(orders) {
            const canvas = document.getElementById('salesChart');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;

            // Pr√©parer les donn√©es (7 derniers jours)
            const days = ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam'];
            const today = new Date();
            const dataPoints = [];
            
            for(let i=6; i>=0; i--) {
                const d = new Date();
                d.setDate(today.getDate() - i);
                const dateStr = d.toISOString().split('T')[0];
                
                // Somme des ventes pour ce jour
                const dailyTotal = orders
                    .filter(o => o.date.startsWith(dateStr))
                    .reduce((sum, o) => sum + o.total, 0);
                
                dataPoints.push({ day: days[d.getDay()], value: dailyTotal });
            }

            // Dessiner
            ctx.clearRect(0, 0, width, height);
            
            // Lignes de fond
            ctx.strokeStyle = 'rgba(255,255,255,0.1)';
            ctx.beginPath();
            for(let i=1; i<5; i++) {
                const y = height - (i * (height/5));
                ctx.moveTo(40, y); ctx.lineTo(width, y);
            }
            ctx.stroke();

            // Tracer la courbe
            const maxVal = Math.max(...dataPoints.map(d => d.value), 10); // √âchelle min 10
            const stepX = (width - 60) / 6;
            
            ctx.beginPath();
            ctx.strokeStyle = '#D4AF37'; // Or
            ctx.lineWidth = 3;
            
            dataPoints.forEach((point, index) => {
                const x = 50 + (index * stepX);
                const y = height - 30 - ((point.value / maxVal) * (height - 60));
                if(index === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
                
                // Points
                ctx.fillStyle = '#D4AF37';
                ctx.fillRect(x-3, y-3, 6, 6);
                
                // Labels X
                ctx.fillStyle = '#888';
                ctx.font = '12px Arial';
                ctx.fillText(point.day, x-10, height - 10);
            });
            ctx.stroke();
        }

        // Fonction "Carte Blanche" : Export CSV
        window.exportOrdersCSV = function() {
            const orders = JSON.parse(localStorage.getItem('kingBurgerOrders')) || [];
            let csvContent = "data:text/csv;charset=utf-8,ID,Date,Client,Total\n";
            orders.forEach(o => {
                csvContent += `${o.id},${o.date},${o.user},${o.total}\n`;
            });
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "comptabilite_gasy_burger.csv");
            document.body.appendChild(link);
            link.click();
        }

        // Fonction utilitaire pour g√©n√©rer des fausses donn√©es (pour tester le graph)
        window.seedDummyData = function() {
            const dummyOrders = [];
            for(let i=0; i<20; i++) {
                const date = new Date();
                date.setDate(date.getDate() - Math.floor(Math.random() * 7));
                dummyOrders.push({
                    id: Date.now() + i,
                    date: date.toISOString(),
                    user: Math.random() > 0.5 ? 'admin' : 'Invit√©',
                    total: Math.floor(Math.random() * 50) + 10,
                    items: {}
                });
            }
            localStorage.setItem('kingBurgerOrders', JSON.stringify(dummyOrders));
            renderAdminDashboard();
        }

        // Fonction pour effacer la base de donn√©es locale (Factory Reset)
        window.factoryReset = function() {
            if(confirm("ATTENTION : Vous allez effacer TOUTES les commandes et TOUS les utilisateurs inscrits.\n\nVoulez-vous vraiment remettre la base de donn√©es √† z√©ro ?")) {
                localStorage.removeItem('kingBurgerOrders');
                localStorage.removeItem('kingBurgerUsers');
                localStorage.removeItem('kingBurgerGiftCards');
                alert("Base de donn√©es effac√©e avec succ√®s.");
                location.reload();
            }
        }

        // 8. Gestion des Modals
        function openModal(modalId) { document.getElementById(modalId).style.display = 'block'; }
        function closeModal(modalId) { document.getElementById(modalId).style.display = 'none'; }

        // 9. Centralisation des √©couteurs d'√©v√©nements
        function setupEventListeners() {
            document.querySelector('.cart-icon').addEventListener('click', toggleCart);
            document.getElementById('clear-cart-btn').addEventListener('click', clearCart);
            document.getElementById('checkout-btn').addEventListener('click', checkout);
            document.getElementById('login-link').addEventListener('click', () => openModal('login-modal'));
            document.getElementById('register-link').addEventListener('click', () => openModal('register-modal'));
            document.getElementById('logout-link').addEventListener('click', handleLogout);
            
            // Profil
            document.getElementById('profile-link').addEventListener('click', () => {
                const users = JSON.parse(localStorage.getItem('kingBurgerUsers')) || [];
                const user = users.find(u => u.username === currentUser);
                const content = document.getElementById('profile-content');
                if(user) {
                    content.innerHTML = `<p><strong>Nom:</strong> ${user.username}</p><p><strong>√Çge:</strong> ${user.age}</p><p><strong>Sexe:</strong> ${user.gender}</p>`;
                } else {
                    content.innerHTML = "<p>Profil administrateur ou invit√©.</p>";
                }
                openModal('profile-modal');
            });

            document.getElementById('gift-card-btn').addEventListener('click', promptForGiftCard);

            document.getElementById('login-form').addEventListener('submit', handleLogin);
            document.getElementById('register-form').addEventListener('submit', handleRegister);

            document.querySelectorAll('.close-btn').forEach(btn => {
                btn.addEventListener('click', (e) => closeModal(e.target.dataset.modal));
            });
            
            document.querySelectorAll('.btn-social').forEach(btn => {
                btn.addEventListener('click', () => alert("Connexion sociale simul√©e pour la d√©mo."));
            });

            // Event delegation for "Add to cart" buttons
            document.getElementById('menu').addEventListener('click', (e) => {
                if (e.target && e.target.classList.contains('btn-add')) {
                    const { id, category } = e.target.dataset;
                    addToCart(id, category);
                }
            });
        }
    </script>
</body>
</html>